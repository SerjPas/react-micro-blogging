(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{101:function(e,t,a){},140:function(e,t,a){"use strict";a.r(t),a.d(t,"auth",(function(){return he})),a.d(t,"db",(function(){return fe}));var n=a(0),r=a.n(n),l=a(9),c=a.n(l),o=(a(101),a(19)),i=a.n(o),u=a(25),s=a(12),m=a(194),p=(a(66),a(82)),d=a(188),h=a(179),f=a(196),E=a(182),g=function(){return r.a.createElement("div",{className:"error140"},"The tweet can't contain more then 140 chars.")},b=r.a.createContext({tweets:[],handleLoad:function(){},addTweet:function(){},addTweets:function(){},handleErrorMessage:function(){}}),v=a(142),y=r.a.createContext({currentUser:null,handleCurrentUser:function(){},handleLogout:function(){}}),w=Object(v.a)((function(){return{root:{marginTop:47,border:"2px solid white",height:180,color:"white",backgroundColor:"#16202C"},button:{position:"relative",bottom:-84,left:-10,backgroundColor:"#007BFF",width:68,height:34,borderRadius:4,alignSelf:"flex-end"}}})),j=function(){var e=w(),t=Object(n.useState)(""),a=Object(s.a)(t,2),l=a[0],c=a[1],o=Object(n.useContext)(b),m=Object(n.useContext)(y),p=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),""===l){e.next=12;break}return e.prev=2,o.handleLoad(!0),e.next=6,fe.ref("tweets").push({id:m.currentUser.id,content:l,date:(new Date).toISOString(),userName:he().currentUser.uid});case 6:c(""),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o.handleErrorMessage(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(h.a,{className:e.root},r.a.createElement("form",{className:"form",onSubmit:p},r.a.createElement(f.a,{onKeyDown:function(e){13===e.keyCode&&!1===e.shiftKey&&(e.preventDefault(),p())},inputProps:{maxLength:140,style:{color:"white"}},multiline:!0,style:{width:"100%"},rows:9,className:"tweet-input",autoFocus:!0,id:"tweet",name:"tweetInput",placeholder:"What you have in mind...",value:l,onChange:function(e){return c(e.target.value)},required:!0}),140===l.length&&r.a.createElement(g,null),r.a.createElement(E.a,{className:e.button,disabled:140===l.length,type:"submit",variant:"contained",color:"primary"},"Tweet")))},C=a(181),x=a(141),O=a(186),k=a(187),N=a(185),S=a(184),U=a(183),L=Object(U.a)({root:{minWidth:"100%",backgroundColor:"#343A40",color:"white"}}),D=function(){var e=L(),t=Object(n.useContext)(b),a=Object(n.useContext)(y);return r.a.createElement(C.a,{className:"form-revers"},t.tweets.map((function(t){return r.a.createElement(x.a,{key:t.id,style:{paddingLeft:"0",paddingRight:"0"}},r.a.createElement(h.a,{className:e.root,style:{minHeight:"100px"}},r.a.createElement(S.a,null,r.a.createElement("span",{style:{color:"#6C757D"}},t.userName),r.a.createElement("span",{style:{marginLeft:"auto",color:"#6C757D"}},t.date)),r.a.createElement(N.a,null,r.a.createElement("div",{className:"user-image-holder"},r.a.createElement("img",{src:a.currentUser.photoURL}),r.a.createElement(O.a,{className:"message-bubble"},r.a.createElement(k.a,{style:{wordWrap:"break-word"}},t.content))))))})))},T=a(76),I=a.n(T),A=function(){return r.a.createElement("div",{style:{width:"100%",height:"100",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(I.a,{type:"ThreeDots",color:"#2BAD60",height:"100",width:"100"}))},P=a(77),W=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!0),o=Object(s.a)(c,2),i=o[0],u=o[1],m=Object(n.useState)(""),h=Object(s.a)(m,2),f=h[0],E=h[1],g=Object(P.usePromiseTracker)().promiseInProgress;Object(n.useEffect)((function(){try{fe.ref("tweets").on("value",(function(e){var t=[];e.forEach((function(e){t.push(e.val())})),l(t),u(!1)}))}catch(e){E(e.message)}}),[]);return r.a.createElement(b.Provider,{value:{tweets:a,handleLoad:function(e){u(e)},addTweet:function(e){l([e].concat(Object(p.a)(a)))},addTweets:function(e){l(e)},handleErrorMessage:function(e){E(e)}}},r.a.createElement("div",null,r.a.createElement(d.a,{maxWidth:"sm"},r.a.createElement(j,null),g||i?r.a.createElement(A,null):"",f&&r.a.createElement("h3",{className:"error"},f),r.a.createElement(D,null))))},B=a(190),R=a(191),F=a(11),M=a(22),K=a(78),H=a.n(K),q=a(81),G=a(189),Q=function(){var e=r.a.useState(null),t=Object(s.a)(e,2),a=t[0],n=t[1],l=function(){n(null)};return r.a.createElement("div",null,r.a.createElement(E.a,{style:{color:"white"},"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){n(e.currentTarget)}},"Menu"),r.a.createElement(q.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:l},r.a.createElement(G.a,{onClick:l},r.a.createElement(M.b,{style:{textDecoration:"none"},to:"/tweets"},"Home")),r.a.createElement(G.a,{onClick:l},r.a.createElement(M.b,{style:{textDecoration:"none"},to:"/profile"},"Profile")),r.a.createElement(G.a,{onClick:l})))},z=function(){var e=Object(n.useContext)(y);return r.a.createElement("div",null,r.a.createElement(B.a,{style:{backgroundColor:"#343A40",borderRadius:"6px",alignSelf:"center"},position:"static"},r.a.createElement(R.a,null,e.currentUser&&r.a.createElement(Q,null),e.currentUser?r.a.createElement("div",{className:"logout-login"},r.a.createElement(H.a,{onClick:e.handleLogout}),!e.currentUser&&r.a.createElement(F.a,{to:{pathname:"/"}})):r.a.createElement(M.b,{className:"logout-login",style:{textDecoration:"none",color:"white"},to:"/login"},"Log in"))))},J=a(83),Z=a(195);function $(e,t){return he().createUserWithEmailAndPassword(e,t)}function _(){var e=new he.GoogleAuthProvider;return he().signInWithPopup(e)}function V(e,t){return he().signInWithEmailAndPassword(e,t)}var X=Object(v.a)((function(){return{root:{marginTop:52,width:545,backgroundColor:"#16202C",margin:0},button:{position:"relative",backgroundColor:"#007BFF",height:34,borderRadius:4,alignSelf:"flex-start"},container:{color:"white",width:"76%",display:"flex",justifyContent:"center"}}})),Y=function(){var e=X(),t=Object(n.useState)(null),a=Object(s.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(""),m=Object(s.a)(o,2),p=m[0],h=m[1],f=Object(n.useState)(""),g=Object(s.a)(f,2),b=g[0],v=g[1],w=Object(n.useContext)(y);function j(){return(j=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c(""),e.prev=2,e.next=5,V(p,b);case 5:a=e.sent,console.log(a,"sign in"),w.handleCurrentUser(a),h(""),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),c(e.t0.message),v("");case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}function C(){return(C=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_();case 3:t=e.sent,w.handleCurrentUser(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c(e.t0.message),v("");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return r.a.createElement(d.a,{className:e.container},r.a.createElement("div",{className:e.root},w.currentUser?r.a.createElement(F.a,{to:{pathname:"/tweets"}}):r.a.createElement("form",{autoComplete:"off",onSubmit:function(e){return j.apply(this,arguments)}},r.a.createElement("h1",null,"Login to",r.a.createElement(M.b,{to:"/login"}," MicroBlog")),r.a.createElement("p",null,"Fill in the form below to login to your account."),r.a.createElement("div",null,r.a.createElement("input",{className:"auth-input",placeholder:"Email",name:"email",type:"email",onChange:function(e){return h(e.target.value)},value:p})),r.a.createElement("div",null,r.a.createElement("input",{className:"auth-input",placeholder:"Password",name:"password",onChange:function(e){return v(e.target.value)},value:b,type:"password"})),r.a.createElement("div",null,l&&r.a.createElement(k.a,{color:"secondary"},l),r.a.createElement(E.a,{className:e.button,type:"submit",variant:"contained",color:"primary"},"Submit")),r.a.createElement("hr",null),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(E.a,{type:"button",fullWidth:!0,variant:"contained",onClick:function(){return C.apply(this,arguments)},color:"secondary"},"Sign In with google")),r.a.createElement("p",null,"Don't have an account? ",r.a.createElement(M.b,{to:"/signup"},"Sign up")))))},ee=Object(v.a)((function(){return{root:{marginTop:52,width:545,backgroundColor:"#16202C"},button:{position:"relative",backgroundColor:"#007BFF",height:34,borderRadius:4,alignSelf:"flex-start"},container:{color:"white",width:"76%",display:"flex",justifyContent:"center"}}})),te=function(){var e=ee(),t=Object(n.useState)(null),a=Object(s.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(""),m=Object(s.a)(o,2),p=m[0],h=m[1],f=Object(n.useState)(""),g=Object(s.a)(f,2),b=g[0],v=g[1],w=Object(n.useContext)(y);function j(){return(j=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c(""),e.prev=2,e.next=5,$(p,b);case 5:a=e.sent,w.handleCurrentUser(a),h(""),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),c(e.t0.message),v("");case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function C(){return(C=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_();case 3:t=e.sent,w.handleCurrentUser(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),this.setState({error:e.t0.message}),v("");case 11:case"end":return e.stop()}}),e,this,[[0,7]])})))).apply(this,arguments)}return r.a.createElement(d.a,{className:e.container},r.a.createElement("div",{className:e.root},w.currentUser?r.a.createElement(F.a,{to:{pathname:"/tweets"}}):r.a.createElement("form",{onSubmit:function(e){return function(e){return j.apply(this,arguments)}(e)}},r.a.createElement("h1",null,"Sign Up",r.a.createElement(M.b,{to:"/login"}," MicroBlog")),r.a.createElement("p",null,"Fill in the form below to create an account."),r.a.createElement("div",null,r.a.createElement("input",{className:"auth-input",placeholder:"Email",name:"email",type:"email",onChange:function(e){return h(e.target.value)},value:p,required:!0})),r.a.createElement("div",null,r.a.createElement("input",{className:"auth-input",placeholder:"Password",name:"password",onChange:function(e){return v(e.target.value)},value:b,type:"password",required:!0})),r.a.createElement("div",null,l&&r.a.createElement(k.a,{color:"secondary"},l),r.a.createElement(E.a,{className:e.button,type:"submit",variant:"contained",color:"primary"},"Submit")),r.a.createElement("hr",null),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(E.a,{type:"button",fullWidth:!0,variant:"contained",onClick:function(){return C.apply(this,arguments)},color:"secondary"},"Sign In with google")),r.a.createElement("p",null,"Already have an account? ",r.a.createElement(M.b,{to:"/"},"Login")))))},ae=a(193),ne=a(197),re=a(192),le=a(79),ce=a.n(le),oe=a(31),ie=Object(U.a)((function(e){return Object(ne.a)({input:{display:"none"}})})),ue=function(){var e=ie(),t=Object(n.useState)(null),a=Object(s.a)(t,2),l=a[0],c=a[1],o=Object(n.useContext)(y);return r.a.createElement("div",{className:e.root},r.a.createElement("input",{onChange:function(e){var t=e.target.files[0],a=oe.storage().ref("img/"+o.currentUser.email).put(t);a.on(oe.storage.TaskEvent.STATE_CHANGED,(function(e){}),(function(e){c(e.message)}),(function(){a.snapshot.ref.getDownloadURL().then((function(e){var t=he().currentUser;t.updateProfile({photoURL:e}).then((function(){console.log(t," edited: "+e),o.handleCurrentUser(t)})).catch((function(e){c(e.message)}))}))}))},accept:"image/*",className:e.input,id:"icon-button-file",type:"file"}),r.a.createElement("label",{htmlFor:"icon-button-file"},r.a.createElement(re.a,{color:"primary","aria-label":"upload picture",component:"span"},r.a.createElement(ce.a,null))),l&&r.a.createElement(k.a,{color:"secondary"},l))},se=Object(U.a)((function(e){return{root:{maxWidth:600,marginTop:52,width:545},media:{minHeight:250},large:{width:e.spacing(7),height:e.spacing(7)},card:{display:"flex"}}}));function me(){var e=Object(n.useContext)(y),t=se();return r.a.createElement(h.a,{className:t.card},r.a.createElement(N.a,{className:t.root},r.a.createElement("div",null,r.a.createElement(ae.a,{className:t.media,image:e.currentUser.photoURL,title:e.currentUser.displayName}),r.a.createElement("div",{className:"upload"},r.a.createElement(ue,null))),r.a.createElement(O.a,null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(k.a,{gutterBottom:!0,variant:"h5",component:"h2"},e.currentUser.displayName)),r.a.createElement(k.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Email: ",e.currentUser.email))))}var pe=function(){return r.a.createElement(d.a,{style:{width:"76%",display:"flex",justifyContent:"center"}},r.a.createElement(me,null))};var de=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],l=t[1];console.log(a);var c=function(e){l(e)},o=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he().signOut().then((function(){l(null)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return he().onAuthStateChanged((function(e){c(e||null)}))})),r.a.createElement("div",null,r.a.createElement(y.Provider,{value:{currentUser:a,handleCurrentUser:c,handleLogout:o}},r.a.createElement(M.a,null,r.a.createElement(m.a,null),r.a.createElement(J.a,null,r.a.createElement(Z.a,{container:!0,style:{justifyContent:"center",display:"flex"}},r.a.createElement(Z.a,{item:!0,xs:12,lg:8},r.a.createElement(z,null))),r.a.createElement(F.d,null,r.a.createElement(F.b,{exact:!0,path:"/signup"},r.a.createElement(te,null)),r.a.createElement(F.b,{exact:!0,path:"/login"},r.a.createElement(Y,null)),a?r.a.createElement(F.b,{path:"/profile"},r.a.createElement(pe,null)):r.a.createElement(F.a,{to:{pathname:"/login"}}),a?r.a.createElement(F.b,{path:"/"},r.a.createElement(W,null)):r.a.createElement(F.a,{to:{pathname:"/login"}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));oe.initializeApp({apiKey:"AIzaSyC6OyRCTsWh6ZvLUA8lQ2jgEvgw8ci5kno",authDomain:"microblogging-project.firebaseapp.com",databaseURL:"https://microblogging-project.firebaseio.com",projectId:"microblogging-project",storageBucket:"microblogging-project.appspot.com",messagingSenderId:"45719062868",appId:"1:45719062868:web:6ba70f40ada88e4342a0c1",measurementId:"G-6KNN7QR1QK"}),oe.analytics();var he=oe.auth,fe=oe.database();c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},66:function(e,t,a){},96:function(e,t,a){e.exports=a(140)}},[[96,1,2]]]);
//# sourceMappingURL=main.188211fd.chunk.js.map